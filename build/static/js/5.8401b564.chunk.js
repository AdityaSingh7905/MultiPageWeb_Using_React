(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[5],{19:function(t,e,n){"use strict";var o=n(0);function c(t,e){return"SEND"===e.type?{data:null,error:null,status:"pending"}:"SUCCESS"===e.type?{data:e.responseData,error:null,status:"completed"}:"ERROR"===e.type?{data:null,error:e.errorMessage,status:"completed"}:t}e.a=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const[n,s]=Object(o.useReducer)(c,{status:e?"pending":null,data:null,error:null});return{sendRequest:Object(o.useCallback)((async function(e){s({type:"SEND"});try{const n=await t(e);s({type:"SUCCESS",responseData:n})}catch(n){s({type:"ERROR",errorMessage:n.message||"Something went wrong!"})}}),[t]),...n}}},20:function(t,e,n){"use strict";n.d(e,"d",(function(){return c})),n.d(e,"e",(function(){return s})),n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return u}));const o="https://react-http-b5b2d-default-rtdb.firebaseio.com";async function c(){const t=await fetch("".concat(o,"/quotes.json")),e=await t.json();if(!t.ok)throw new Error(e.message||"Could not fetch quotes.");const n=[];for(const o in e){const t={id:o,...e[o]};n.push(t)}return n}async function s(t){const e=await fetch("".concat(o,"/quotes/").concat(t,".json")),n=await e.json();if(!e.ok)throw new Error(n.message||"Could not fetch quote.");return{id:t,...n}}async function a(t){const e=await fetch("".concat(o,"/quotes.json"),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}),n=await e.json();if(!e.ok)throw new Error(n.message||"Could not create quote.");return null}async function r(t){const e=await fetch("".concat(o,"/comments/").concat(t.quoteId,".json"),{method:"POST",body:JSON.stringify(t.commentData),headers:{"Content-Type":"application/json"}}),n=await e.json();if(!e.ok)throw new Error(n.message||"Could not add comment.");return{commentId:n.name}}async function u(t){const e=await fetch("".concat(o,"/comments/").concat(t,".json")),n=await e.json();if(!e.ok)throw new Error(n.message||"Could not get comments.");const c=[];for(const o in n){const t={id:o,...n[o]};c.push(t)}return c}},29:function(t,e,n){t.exports={card:"Card_card__7XY5c"}},30:function(t,e,n){t.exports={form:"QuoteForm_form__2EbQ_",loading:"QuoteForm_loading__2iz7a",control:"QuoteForm_control__3bQJF",actions:"QuoteForm_actions__3lHFs"}},31:function(t,e,n){t.exports={block:"Blocker_block__13Ft4"}},35:function(t,e,n){"use strict";n.r(e);var o=n(2),c=n(0),s=n(29),a=n.n(s),r=n(3);var u=t=>Object(r.jsx)("div",{className:a.a.card,children:t.children}),i=n(8),l=n(30),d=n.n(l),j=n(31),b=n.n(j);var h=t=>{const e=Object(o.m)((e=>{let{currentLocation:n,nextLocation:o}=e;return!1!==t.isFocus&&n.pathname!==o.pathname}));return Object(r.jsx)(c.Fragment,{children:"blocked"===e.state?Object(r.jsxs)("div",{className:b.a.block,children:[Object(r.jsx)("p",{children:"Are you sure you want to leave?"}),Object(r.jsx)("button",{onClick:()=>e.proceed(),children:"Proceed"}),Object(r.jsx)("button",{onClick:()=>e.reset(),children:"Cancel"})]}):null})};var m=t=>{const[e,n]=Object(c.useState)(!1),[o,s]=Object(c.useState)(""),[a,l]=Object(c.useState)(!1),[j,b]=Object(c.useState)(""),[m,f]=Object(c.useState)(!1),p=0===o.trim().length,O=p&&a,x=0===j.trim().length,g=x&&m;let w=!1;p||x||(w=!0);return Object(r.jsxs)(c.Fragment,{children:[Object(r.jsx)(h,{isFocus:e}),Object(r.jsx)(u,{children:Object(r.jsxs)("form",{onFocus:()=>{n(!0)},className:d.a.form,onSubmit:function(e){e.preventDefault(),t.onAddQuote({author:o,text:j})},children:[t.isLoading&&Object(r.jsx)("div",{className:d.a.loading,children:Object(r.jsx)(i.a,{})}),Object(r.jsxs)("div",{className:d.a.control,children:[Object(r.jsx)("label",{htmlFor:"author",children:"Author"}),Object(r.jsx)("input",{type:"text",id:"author",value:o,onChange:t=>{s(t.target.value)},onBlur:t=>{l(!0)}}),O&&Object(r.jsx)("p",{children:"Please enter a valid text."})]}),Object(r.jsxs)("div",{className:d.a.control,children:[Object(r.jsx)("label",{htmlFor:"text",children:"Text"}),Object(r.jsx)("textarea",{id:"text",rows:"5",value:j,onChange:t=>{b(t.target.value)},onBlur:t=>{f(!0)}}),g&&Object(r.jsx)("p",{children:"Please enter a valid text."})]}),Object(r.jsx)("div",{className:d.a.actions,children:Object(r.jsx)("button",{disabled:!w,onClick:()=>{n(!1)},className:"btn",children:"Add Quote"})})]})})]})},f=n(20),p=n(19);e.default=()=>{const t=Object(o.q)(),{sendRequest:e,status:n}=Object(p.a)(f.b);Object(c.useEffect)((()=>{"completed"===n&&t("/quotes")}),[n,t]);return Object(r.jsx)(m,{onAddQuote:t=>{e(t)}})}}}]);
//# sourceMappingURL=5.8401b564.chunk.js.map