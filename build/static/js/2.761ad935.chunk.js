(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[2],{19:function(e,t,n){"use strict";var c=n(0);function o(e,t){return"SEND"===t.type?{data:null,error:null,status:"pending"}:"SUCCESS"===t.type?{data:t.responseData,error:null,status:"completed"}:"ERROR"===t.type?{data:null,error:t.errorMessage,status:"completed"}:e}t.a=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const[n,s]=Object(c.useReducer)(o,{status:t?"pending":null,data:null,error:null});return{sendRequest:Object(c.useCallback)((async function(t){s({type:"SEND"});try{const n=await e(t);s({type:"SUCCESS",responseData:n})}catch(n){s({type:"ERROR",errorMessage:n.message||"Something went wrong!"})}}),[e]),...n}}},20:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return m}));const c="https://react-http-b5b2d-default-rtdb.firebaseio.com";async function o(){const e=await fetch("".concat(c,"/quotes.json")),t=await e.json();if(!e.ok)throw new Error(t.message||"Could not fetch quotes.");const n=[];for(const c in t){const e={id:c,...t[c]};n.push(e)}return n}async function s(e){const t=await fetch("".concat(c,"/quotes/").concat(e,".json")),n=await t.json();if(!t.ok)throw new Error(n.message||"Could not fetch quote.");return{id:e,...n}}async function a(e){const t=await fetch("".concat(c,"/quotes.json"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}),n=await t.json();if(!t.ok)throw new Error(n.message||"Could not create quote.");return null}async function r(e){const t=await fetch("".concat(c,"/comments/").concat(e.quoteId,".json"),{method:"POST",body:JSON.stringify(e.commentData),headers:{"Content-Type":"application/json"}}),n=await t.json();if(!t.ok)throw new Error(n.message||"Could not add comment.");return{commentId:n.name}}async function m(e){const t=await fetch("".concat(c,"/comments/").concat(e,".json")),n=await t.json();if(!t.ok)throw new Error(n.message||"Could not get comments.");const o=[];for(const c in n){const e={id:c,...n[c]};o.push(e)}return o}},24:function(e,t,n){e.exports={comments:"Comments_comments__2huJU"}},25:function(e,t,n){e.exports={form:"NewCommentForm_form__tum2z",loading:"NewCommentForm_loading__2LqIv",control:"NewCommentForm_control__EuAvC",actions:"NewCommentForm_actions__1mQne"}},26:function(e,t,n){e.exports={item:"CommentItem_item__2eg18"}},27:function(e,t,n){e.exports={comments:"CommentsList_comments__1zyEZ"}},28:function(e,t,n){e.exports={quote:"HighlightedQuote_quote__3YXSB"}},33:function(e,t,n){"use strict";n.r(t);var c=n(2),o=n(4),s=n(0),a=n(19),r=n(20),m=n(24),u=n.n(m),i=n(25),d=n.n(i),l=n(8),j=n(3);var b=e=>{const t=Object(s.useRef)(),{sendRequest:n,status:c,error:o}=Object(a.a)(r.a),{quoteId:m,onAddComment:u}=e;Object(s.useEffect)((()=>{"completed"!==c||o||u()}),[c,o,u]);const i=e=>{e.preventDefault();const c=t.current.value;console.log(c);n({quoteId:m,commentData:{text:c}}),t.current.value=""};return Object(j.jsxs)("form",{className:d.a.form,onSubmit:i,children:["pending"===c&&Object(j.jsx)("div",{className:"centered",children:Object(j.jsx)(l.a,{})}),Object(j.jsxs)("div",{className:d.a.control,onSubmit:i,children:[Object(j.jsx)("label",{htmlFor:"comment",children:"Your Comment"}),Object(j.jsx)("textarea",{id:"comment",rows:"5",ref:t})]}),Object(j.jsx)("div",{className:d.a.actions,children:Object(j.jsx)("button",{className:"btn",children:"Add Comment"})})]})},h=n(26),f=n.n(h);var O=e=>Object(j.jsx)("li",{className:f.a.item,children:Object(j.jsx)("p",{children:e.text})}),x=n(27),p=n.n(x);var g=e=>Object(j.jsx)("ul",{className:p.a.comments,children:e.comments.map((e=>Object(j.jsx)(O,{text:e.text},e.id)))});var w=e=>{const[t,n]=Object(s.useState)(!1),{sendRequest:c,status:o,data:m,error:i}=Object(a.a)(r.c),{quoteId:d}=e;Object(s.useEffect)((()=>{c(d)}),[c,d]);const h=Object(s.useCallback)((()=>{c(d)}),[c,d]);let f;return"pending"===o&&(f=Object(j.jsx)("div",{className:"centered",children:Object(j.jsx)(l.a,{})})),i&&(f=Object(j.jsx)("div",{className:"centered focused",children:i})),"completed"===o&&m&&m.length>0&&(console.log(m),f=Object(j.jsx)(g,{comments:m})),"completed"!==o||m&&0!==m.length||(f=Object(j.jsx)("p",{children:"No comments yet!!"})),Object(j.jsxs)("section",{className:u.a.comments,children:[Object(j.jsx)("h2",{children:"User Comments"}),!t&&Object(j.jsx)("button",{className:"btn",onClick:()=>{n(!0)},children:"Add a Comment"}),t&&Object(j.jsx)(b,{quoteId:e.quoteId,onAddComment:h}),f]})},C=n(28),N=n.n(C);var q=e=>Object(j.jsxs)("figure",{className:N.a.quote,children:[Object(j.jsx)("p",{children:e.text}),Object(j.jsx)("figcaption",{children:e.author})]});t.default=()=>{const e=Object(c.s)(),{sendRequest:t,status:n,data:m,error:u}=Object(a.a)(r.e,!0),{quoteId:i}=e;return Object(s.useEffect)((()=>{t(i)}),[t,i]),"pending"===n?Object(j.jsx)("div",{className:"centered",children:Object(j.jsx)(l.a,{})}):u?Object(j.jsx)("div",{className:"centered focused",children:u}):m.text?Object(j.jsxs)(s.Fragment,{children:[Object(j.jsx)(q,{text:m.text,author:m.author}),Object(j.jsxs)(c.d,{children:[Object(j.jsx)(c.b,{path:"/",element:Object(j.jsx)("div",{className:"centered",children:Object(j.jsx)(o.a,{className:"btn--flat",to:"/quotes/".concat(e.quoteId,"/comments"),children:"Load Comments..."})})}),Object(j.jsx)(c.b,{path:"comments",element:Object(j.jsx)(w,{quoteId:e.quoteId})})]})]}):Object(j.jsx)("p",{children:"No Quote Found!!"})}}}]);
//# sourceMappingURL=2.761ad935.chunk.js.map